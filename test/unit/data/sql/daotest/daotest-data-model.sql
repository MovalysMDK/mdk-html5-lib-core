CREATE TABLE IF NOT EXISTS T_AGENCEDETAIL(
	ID INTEGER NOT NULL,
	CREATION NUMERIC,
	NOTATION REAL,
	AGENCEID INTEGER NOT NULL,
	CONSTRAINT PK_AGENCEDETAIL PRIMARY KEY (ID),
	CONSTRAINT FK_AGENCE_ID FOREIGN KEY(AGENCEID) REFERENCES T_AGENCE(ID) ON UPDATE CASCADE
);

CREATE TABLE IF NOT EXISTS T_ACTIVITE(
	ID INTEGER NOT NULL,
	LABEL TEXT NOT NULL,
	CONSTRAINT PK_ACTIVITE PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS T_AGENCEPHOTOS(
	IDENTIFIER INTEGER NOT NULL,
	PHOTO_NAME TEXT,
	PHOTO_URI TEXT,
	PHOTO_DATE NUMERIC,
	PHOTO_DESC TEXT,
	PHOTO_PHOTOSTATE NUMBER(10,0),
	PHOTOSAGENCEID INTEGER NOT NULL,
	CONSTRAINT PK_AGENCEPHOTOS PRIMARY KEY (IDENTIFIER),
	CONSTRAINT FK_PHOTOSAGENCE_ID FOREIGN KEY(PHOTOSAGENCEID) REFERENCES T_AGENCE(ID) ON UPDATE CASCADE
);

CREATE TABLE IF NOT EXISTS T_SKILL(
	ID INTEGER NOT NULL,
	LABEL TEXT NOT NULL,
	CONSTRAINT PK_SKILL PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS T_RESERVATION(
	ID INTEGER NOT NULL,
	STARTDATE NUMERIC NOT NULL,
	ENDDATE NUMERIC NOT NULL,
	RESOURCEID INTEGER NOT NULL,
	EMPLOYEID INTEGER NOT NULL,
	CONSTRAINT PK_RESERVATION PRIMARY KEY (ID),
	CONSTRAINT FK_RESOURCE_ID FOREIGN KEY(RESOURCEID) REFERENCES T_RESOURCE(ID) ON UPDATE CASCADE,
	CONSTRAINT FK_EMPLOYE_ID FOREIGN KEY(EMPLOYEID) REFERENCES T_EMPLOYEE(ID) ON UPDATE CASCADE,
	CONSTRAINT U_T_RESERVATI_U_RESERVATI UNIQUE(RESOURCEID,EMPLOYEID)
);

CREATE TABLE IF NOT EXISTS T_EMPLOYEE(
	ID INTEGER NOT NULL,
	FIRSTNAME TEXT NOT NULL,
	LASTNAME TEXT NOT NULL,
	PHOTO_NAME TEXT,
	PHOTO_URI TEXT,
	PHOTO_DATE NUMERIC,
	PHOTO_DESC TEXT,
	PHOTO_PHOTOSTATE NUMBER(10,0),
	AGENCEID1 INTEGER NOT NULL,
	CONSTRAINT PK_EMPLOYEE PRIMARY KEY (ID),
	CONSTRAINT FK_AGENCE_ID1 FOREIGN KEY(AGENCEID1) REFERENCES T_AGENCE(ID) ON UPDATE CASCADE,
	CONSTRAINT U_T_EMPLOYEE_FIRSTLASTNAM UNIQUE(FIRSTNAME,LASTNAME)
);

CREATE TABLE IF NOT EXISTS T_RESOURCE(
	ID INTEGER NOT NULL,
	LABEL TEXT NOT NULL,
	ENABLE NUMERIC NOT NULL,
	RESOURCETYPE NUMBER(10,0) NOT NULL,
	CONSTRAINT PK_RESOURCE PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS T_CLIENT(
	ID INTEGER NOT NULL,
	NOM TEXT NOT NULL,
	PRENOM TEXT NOT NULL,
	TELEPHONE TEXT NOT NULL,
	POSITION_LATITUDE REAL,
	POSITION_LONGITUDE REAL,
	POSITION_COMPL TEXT,
	POSITION_STREET TEXT,
	POSITION_CITY TEXT,
	POSITION_COUNTRY TEXT,
	EMAIL TEXT NOT NULL,
	AGENCEID12 INTEGER,
	AGENCYID INTEGER NOT NULL,
	CONSTRAINT PK_CLIENT PRIMARY KEY (ID),
	CONSTRAINT FK_AGENCE_ID12 FOREIGN KEY(AGENCEID12) REFERENCES T_AGENCE(ID) ON UPDATE CASCADE,
	CONSTRAINT FK_AGENCY_ID FOREIGN KEY(AGENCYID) REFERENCES T_AGENCE(ID) ON UPDATE CASCADE,
	CONSTRAINT U_T_CLIENT_EMAIL UNIQUE(EMAIL),
	CONSTRAINT U_T_CLIENT_UKNOMPRENOM UNIQUE(NOM,PRENOM)
);

CREATE TABLE IF NOT EXISTS T_AGENCE(
	ID INTEGER NOT NULL,
	NOM TEXT NOT NULL,
	RUE TEXT NOT NULL,
	CODEPOSTAL TEXT NOT NULL,
	VILLE TEXT NOT NULL,
	POSITION_LATITUDE REAL,
	POSITION_LONGITUDE REAL,
	POSITION_COMPL TEXT,
	POSITION_STREET TEXT,
	POSITION_CITY TEXT,
	POSITION_COUNTRY TEXT,
	WEBSITE TEXT NOT NULL,
	PHONE TEXT NOT NULL,
	DECIMAL REAL NOT NULL,
	ACTIVITE4ID INTEGER NOT NULL,
	DETAILID INTEGER NOT NULL,
	ACTIVITE3ID INTEGER NOT NULL,
	ACTIVITE2ID INTEGER,
	ACTIVITE1ID INTEGER,
	MAINCLIENTID INTEGER NOT NULL,
	CONSTRAINT PK_AGENCE PRIMARY KEY (ID),
	CONSTRAINT FK_ACTIVITE4_ID FOREIGN KEY(ACTIVITE4ID) REFERENCES T_ACTIVITE(ID) ON UPDATE CASCADE,
	CONSTRAINT FK_DETAIL_ID FOREIGN KEY(DETAILID) REFERENCES T_AGENCEDETAIL(ID) ON UPDATE CASCADE,
	CONSTRAINT FK_ACTIVITE3_ID FOREIGN KEY(ACTIVITE3ID) REFERENCES T_ACTIVITE(ID) ON UPDATE CASCADE,
	CONSTRAINT FK_ACTIVITE2_ID FOREIGN KEY(ACTIVITE2ID) REFERENCES T_ACTIVITE(ID) ON UPDATE CASCADE,
	CONSTRAINT FK_ACTIVITE1_ID FOREIGN KEY(ACTIVITE1ID) REFERENCES T_ACTIVITE(ID) ON UPDATE CASCADE,
	CONSTRAINT FK_MAINCLIENT_ID FOREIGN KEY(MAINCLIENTID) REFERENCES T_CLIENT(ID) ON UPDATE CASCADE,
	CONSTRAINT U_T_AGENCE_NOM UNIQUE(NOM),
	CONSTRAINT U_T_AGENCE_UKAGENCEDETAIL UNIQUE(DETAILID)
);

CREATE TABLE IF NOT EXISTS T_WORD(
	ID INTEGER NOT NULL,
	NOM TEXT NOT NULL,
	CONSTRAINT PK_WORD PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS T_EMPLSKILL(
	EMPLOYEEID INTEGER NOT NULL,
	SKILLID INTEGER NOT NULL,
	CONSTRAINT PK_EMPLSKILL PRIMARY KEY (EMPLOYEEID,SKILLID),
	CONSTRAINT FK_SKILLS_ID FOREIGN KEY(SKILLID) REFERENCES T_SKILL(ID) ON UPDATE CASCADE ON DELETE CASCADE,
	CONSTRAINT FK_EMPLOYEES_ID FOREIGN KEY(EMPLOYEEID) REFERENCES T_EMPLOYEE(ID) ON UPDATE CASCADE ON DELETE CASCADE
);


CREATE INDEX  IF NOT EXISTS I_AGENCEDETAIL_AGENCE ON T_AGENCEDETAIL (AGENCEID);
CREATE INDEX  IF NOT EXISTS I_AGENCEPHOTO_PHOTOSAGENC ON T_AGENCEPHOTOS (PHOTOSAGENCEID);
CREATE INDEX  IF NOT EXISTS I_RESERVATION_RESOURCE ON T_RESERVATION (RESOURCEID);
CREATE INDEX  IF NOT EXISTS I_RESERVATION_EMPLOYE ON T_RESERVATION (EMPLOYEID);
CREATE INDEX  IF NOT EXISTS I_EMPLOYEE_AGENCE ON T_EMPLOYEE (AGENCEID1);
CREATE INDEX  IF NOT EXISTS I_CLIENT_AGENCE ON T_CLIENT (AGENCEID12);
CREATE INDEX  IF NOT EXISTS I_CLIENT_AGENCY ON T_CLIENT (AGENCYID);
CREATE INDEX  IF NOT EXISTS I_AGENCE_ACTIVITE4 ON T_AGENCE (ACTIVITE4ID);
CREATE INDEX  IF NOT EXISTS I_AGENCE_DETAIL ON T_AGENCE (DETAILID);
CREATE INDEX  IF NOT EXISTS I_AGENCE_ACTIVITE3 ON T_AGENCE (ACTIVITE3ID);
CREATE INDEX  IF NOT EXISTS I_AGENCE_ACTIVITE2 ON T_AGENCE (ACTIVITE2ID);
CREATE INDEX  IF NOT EXISTS I_AGENCE_ACTIVITE1 ON T_AGENCE (ACTIVITE1ID);
CREATE INDEX  IF NOT EXISTS I_AGENCE_MAINCLIENT ON T_AGENCE (MAINCLIENTID);
CREATE INDEX  IF NOT EXISTS I_SKILL_SKILLS ON T_EMPLSKILL (SKILLID);

